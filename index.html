<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>

  <body style="margin: 0; overflow: hidden;">
    
    <script>
      // Componente para manejar el cambio de modelos
      AFRAME.registerComponent('gestor-interaccion', {
        init: function () {
          const modeloPrincipal = document.querySelector('#modelo-ar');
          const btnRojo = document.querySelector('#btn-rojo');
          const btnAzul = document.querySelector('#btn-azul');

          // Al hacer clic en el botón rojo (Ferrari / Red Bull)
          btnRojo.addEventListener('click', () => {
            modeloPrincipal.setAttribute('gltf-model', 'url(./ferrari.glb)');
            console.log("Cambiando a Ferrari");
          });

          // Al hacer clic en el botón azul (McLaren / Iridium)
          btnAzul.addEventListener('click', () => {
            modeloPrincipal.setAttribute('gltf-model', 'url(./mclaren.glb)');
            console.log("Cambiando a McLaren");
          });
        }
      });
    </script>

    <a-scene 
      embedded 
      arjs="sourceType: webcam; debugUIEnabled: false;" 
      cursor="rayOrigin: mouse" 
      raycaster="objects: .clickable">
      
      <a-assets>
        </a-assets>

      <a-marker preset="hiro" gestor-interaccion>
        
        <a-entity 
          id="modelo-ar" 
          position="0 0 0" 
          scale="0.5 0.5 0.5" 
          gltf-model="url(./modelo-inicial.glb)">
        </a-entity>

        <a-box 
          id="btn-rojo" 
          class="clickable" 
          position="-0.6 0.2 0.5" 
          scale="0.3 0.1 0.3" 
          color="red">
          <a-text value="RED" align="center" position="0 0.6 0" rotation="-90 0 0" width="2"></a-text>
        </a-box>

        <a-box 
          id="btn-azul" 
          class="clickable" 
          position="0.6 0.2 0.5" 
          scale="0.3 0.1 0.3" 
          color="blue">
          <a-text value="BLUE" align="center" position="0 0.6 0" rotation="-90 0 0" width="2"></a-text>
        </a-box>

      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
