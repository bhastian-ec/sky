<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Test Gráfico AR</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js'></script>
    
    <style>
        body { margin: 0; overflow: hidden; font-family: monospace; }
        #console {
            position: absolute; top: 0; left: 0; width: 100%;
            background: rgba(0,0,0,0.8); color: #00FF00;
            padding: 10px; pointer-events: none; z-index: 99999;
            white-space: pre-wrap; font-size: 12px;
        }
        .error { color: #FF4444 !important; font-weight: bold; }
    </style>
</head>

<body>
    <div id="console">Iniciando sistema gráfico...</div>

    <script>
        // Función para mostrar errores en la pantalla del móvil
        function log(msg, type) {
            const c = document.getElementById('console');
            c.innerHTML += `<div class="${type === 'error' ? 'error' : ''}">> ${msg}</div>`;
        }
        window.onerror = function(message, source, lineno, colno, error) {
            log(`ERROR: ${message}`, 'error');
        };
    </script>

    <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false; videoTexture: true;' vr-mode-ui="enabled: false">
        
        <a-entity camera look-controls>
            <a-box position="0 0 -3" scale="0.5 0.5 0.5" color="red" animation="property: rotation; to: 0 360 0; loop: true; dur: 2000"></a-box>
            <a-text value="SI VES ESTO, FUNCIONA" position="0 0.8 -3" align="center" color="yellow"></a-text>
        </a-entity>

        <a-entity id="world-objects">
            <a-sphere position="0 2 -10" radius="1" color="cyan"></a-sphere>
            <a-text value="ESTRELLA NORTE (Simulada)" position="0 4 -10" scale="2 2 2" align="center" color="white"></a-text>
        </a-entity>

    </a-scene>

    <script>
        log("Librerías gráficas cargadas.");
        log("Intentando renderizar cubo rojo...");
        
        // Verificación de WebGL
        const scene = document.querySelector('a-scene');
        scene.addEventListener('loaded', () => {
            log("Escena 3D cargada correctamente.");
            log("Mira al frente. ¿Ves un cubo rojo girando?");
        });
        
        // Verificación de cámara
        scene.addEventListener('camera-init', () => {
            log("Cámara AR iniciada.");
        });
        
        scene.addEventListener('camera-error', (e) => {
            log("ERROR DE CÁMARA: " + e.detail.error, 'error');
        });
    </script>
</body>
</html>
